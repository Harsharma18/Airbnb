<% layout("/layouts/boilerplate.ejs") -%>
<head>
  <!-- Google Fonts Import -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&family=Roboto:wght@300;400&display=swap" rel="stylesheet">
  <link href="/css/index.css" rel="stylesheet">
</head>
<body>
  
    <div class="filter-main ">
       
        <div id="filters">
            <div class="left_img_button" id="leftBtn" >
                <i class="fa-solid fa-angle-left"></i>
            </div>
            <a href="/listings/">
                <div class="filter ps-2 pe-2">
                    <div><img src="/icons/0.png" alt="icons" style="width: 25px; height: 25px;"></div>
                    <p style="text-decoration: none;">ALL</p>
                </div>
            </a>
            <a href="/listings/filter/Beachfront">
                <div class="filter">
                    <div><img src="/icons/1.png" alt="icons" style="width: 25px; height: 25px;"></div>
                    <p>Beachfront</p>
                </div>
            </a>
            <a href="/listings/filter/Cabins">
                <div class="filter">
                    <div><img src="/icons/2.png" alt="icons" style="width: 25px; height: 25px;"></div>
                    <p>&nbsp;Cabins&nbsp;</p>
                </div>
            </a>
            <a href="/listings/filter/Omg">
                <div class="filter">
                    <div><img src="/icons/3.png" alt="icons" style="width: 25px; height: 25px;"></div>
                    <p>&nbsp;OMG!&nbsp;</p>
                </div>
            </a>
            <a href="/listings/filter/Lake">
                <div class="filter">
                    <div><img src="/icons/4.png" alt="icons" style="width: 25px; height: 25px;"></div>
                    <p>&nbsp;Lake&nbsp;</p>
                </div>
            </a>
            <a href="/listings/filter/Design">
                <div class="filter">
                    <div><img src="/icons/5.png" alt="icons" style="width: 25px; height: 25px;"></div>
                    <p>&nbsp;Design&nbsp;</p>
                </div>
            </a>
            <a href="/listings/filter/Amazing Pools">
                <div class="filter">
                    <div><img src="/icons/6.png" alt="icons" style="width: 25px; height: 25px;"></div>
                    <p>Amazing pools</p>
                </div>
            </a>
            <a href="/listings/filter/Farms">
                <div class="filter">
                    <div><img src="/icons/7.png" alt="icons" style="width: 25px; height: 25px;"></div>
                    <p>&nbsp;Farms&nbsp;</p>
                </div>
            </a>
            <a href="/listings/filter/Amazing Views">
                <div class="filter">
                    <div><img src="/icons/8.png" alt="icons" style="width: 25px; height: 25px;"></div>
                    <p>Amazing views</p>
                </div>
            </a>
            <a href="/listings/filter/Rooms">
                <div class="filter">
                    <div><img src="/icons/9.png" alt="icons" style="width: 25px; height: 25px;"></div>
                    <p>&nbsp;Rooms&nbsp;</p>
                </div>
            </a>
            <a href="/listings/filter/Lakefront">
                <div class="filter">
                    <div><img src="/icons/10.png" alt="icons" style="width: 25px; height: 25px;"></div>
                    <p>Lakefront</p>
                </div>
            </a>
            <a href="/listings/filter/Tiny Homes">
                <div class="filter">
                    <div><img src="/icons/11.png" alt="icons" style="width: 25px; height: 25px;"></div>
                    <p>Tiny homes</p>
                </div>
            </a>
            <a href="/listings/filter/Countryside">
                <div class="filter">
                    <div><img src="/icons/12.png" alt="icons" style="width: 25px; height: 25px;"></div>
                    <p>Countryside</p>
                </div>
            </a>
            <a href="/listings/filter/Treehouse">
                <div class="filter">
                    <div><img src="/icons/13.png" alt="icons" style="width: 25px; height: 25px;"></div>
                    <p>Treehouse</p>
                </div>
            </a>
            <a href="/listings/filter/Trending">
                <div class="filter">
                    <div><img src="/icons/14.png" alt="icons" style="width: 25px; height: 25px;"></div>
                    <p>Trending</p>
                </div>
            </a>
            <a href="/listings/filter/Tropical">
                <div class="filter">
                    <div><img src="/icons/15.png" alt="icons" style="width: 25px; height: 25px;"></div>
                    <p>Tropical</p>
                </div>
            </a>
            <a href="/listings/filter/National Parks">
                <div class="filter">
                    <div><img src="/icons/16.png" alt="icons" style="width: 25px; height: 25px;"></div>
                    <p>National parks</p>
                </div>
            </a>
            <a href="/listings/filter/Castles">
                <div class="filter">
                    <div><img src="/icons/17.png" alt="icons" style="width: 25px; height: 25px;"></div>
                    <p>Castles</p>
                </div>
                </a>
            <a href="/listings/filter/Camping">
                <div class="filter">
                    <div><img src="/icons/18.png" alt="icons" style="width: 25px; height: 25px;"></div>
                    <p>Camping</p>
                </div>
                </a>
            <a href="/listings/filter/Top Of The World">
                <div class="filter">
                    <div><img src="/icons/19.png" alt="icons" style="width: 25px; height: 25px;"></div>
                    <p>Top of the world</p>
                </div>
                </a>
            <a href="/listings/filter/Luxe">
                <div class="filter">
                    <div><img src="/icons/20.png" alt="icons" style="width: 25px; height: 25px;"></div>
                    <p>&nbsp;Luxe&nbsp;</p>
                </div>
                </a>
            <a href="/listings/filter/Iconic Cities">
                <div class="filter">
                    <div><img src="/icons/21.png" alt="icons" style="width: 25px; height: 25px;"></div>
                    <p>Iconic cities</p>
                </div>
                </a>
            <a href="/listings/filter/Earth Homes">
                <div class="filter">
                    <div><img src="/icons/22.png" alt="icons" style="width: 25px; height: 25px;"></div>
                    <p>Earth homes</p>
                </div>
            </a>
            <div class="right_img_button" id="rightBtn">
                <i class="fa-solid fa-angle-right"></i>
            </div>
           

       </div>
       <div class="tax-toggle mb-3 mt-1 ms-3">
        <div class="form-check-reverse form-switch custom-switch">
            
            <input class="form-check-input" type="checkbox" id="tax">
            <label class="form-check-label" for="tax">Display tax before taxes</label>
        </div>
       </div>
    

      
    <div class="row row-cols-xxl-4 row-cols-lg-3 row-cols-md-2 row-cols-sm-1 mx-auto ">
        <% for (const listing of allListings) { %>
            <a href="/listings/<%= listing._id %>" class="listing-link">
                <%
                 let today = new Date();
                let startDate = new Date(today);
                let randomDate = Math.floor(Math.random() * 28 + 1);
                startDate.setDate(startDate.getDate() + randomDate);
                let endDate = new Date(startDate);
                let stayDays = Math.floor(Math.random() * 4 + 2);
                endDate.setDate(endDate.getDate() + stayDays);
            
                let months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
                let startDay = startDate.getDate();
                let startMonth = months[startDate.getMonth()];
                let endDay = endDate.getDate();
                let endMonth = months[endDate.getMonth()];
            
                let formattedDates = `${startDay} ${startMonth} - ${endDay} ${endMonth}`;
                %>
                <!-- Card -->
                <div class="card listing-card">
                    <div class="card-img-container">
                        <img src="<%= listing.image.url %>" class="card-img-top" alt="">
                        <!-- Heart icon -->
                        <span class="heart">&#9829;</span>
                    </div>
                    <div class="card-body">
                        <h5 class="card-title"><%= listing.title %></h5>
                        <p class="card-location"><%= listing.location %>, <%= listing.country %></p>

                        <p class="card-dates"><%= formattedDates %></p>
                        <p class="card-price normal-price">
                            &#8377; <%= listing.price ? listing.price.toLocaleString("en-IN") : 'Price not available' %>/night
                        </p>
                        
                        <p class="card-price tax-price">
                            <b>&#8377;</b> <%= (listing.price * 1.18).toLocaleString("en-IN") %> 
                            <i class="fade-text">total after taxes</i>
                        </p>
                        

                    </div>
                </div>
            </a>
        <% } %>
    </div>
    
   
  <script src="/js/filter.js"></script>
 <script src="/js/tax.js"></script>
</body>
